<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, viewport-fit=cover">
    <title>Our Record - Live2D Viewer</title>
    <style>
        /* rotate hint overlay (non-blocking): inner panel handles clicks */
        #rotateHint { position: fixed; left: 0; top: 0; right: 0; bottom: 0; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.28); z-index: 40; color: #fff; font-size: 18px; text-align: center; padding: 16px; pointer-events: none; }
        #rotateHint .rotatePanel { pointer-events: auto; background: rgba(0,0,0,0.85); padding: 12px 14px; border-radius: 10px; display:flex;flex-direction:column;align-items:center; }
        @media (max-width:520px) {
            #fullscreenBtn { display: block; width: 100%; margin-top: 6px; }
            #rotateHint .rotatePanel { width: 85%; }
        }
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000000;
        }

        #app {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        /* Right-side overlay controls */
        #controls {
            position: absolute;
            z-index: 20;
            top: 12px;
            right: 12px;
            width: 240px;
            padding: 10px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.62);
            color: #e6e6e6;
            font: 13px/1.3 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            pointer-events: auto;
            transition: transform 220ms ease, opacity 220ms ease;
            will-change: transform;
        }

        #controls.collapsed {
            transform: translateX(110%);
            opacity: 0.0;
            pointer-events: none;
        }

        #controls label {
            display: block;
            margin: 6px 0 4px;
            font-size: 12px;
        }

        #controls select,
        #controls input[type="range"],
        #controls input[type="checkbox"]
        { font-size: 12px; }

        #controls button { font-size: 13px; padding: 6px 8px; }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* Small menu toggle in corner */
        .menu-toggle {
            position: fixed;
            top: 12px;
            right: 12px;
            z-index: 30;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(0,0,0,0.6);
            color: #e6e6e6;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .small {
            font-size: 12px;
            padding: 6px 8px;
        }

        /* Mobile: smaller panel and tighter spacing */
        @media (max-width: 520px) {
            #controls { width: 180px; padding: 8px; right: 8px; top: 8px; border-radius: 8px; }
            .menu-toggle { width: 34px; height: 34px; right: 8px; top: 8px; }
            #controls label { font-size: 11px; }
            #controls select, #controls input[type="range"] { font-size: 11px; }
            #controls button { font-size: 12px; padding: 5px 6px; }
        }
    </style>

    <script src="lib/live2dcubismcore.min.js"></script>
    <script src="lib/live2d.min.js"></script>
    <script src="lib/pixi.min.js"></script>
    <script src="lib/pixi-live2d-display-index.min.js"></script>
</head>
<body>
    <div id="app">
        <canvas id="canvas"></canvas>
        <button id="menuToggle" class="menu-toggle" aria-expanded="true" aria-label="Toggle controls">âœ•</button>
        <div id="controls">
            <div style="display:flex;align-items:center;gap:8px;">
                <div style="flex:1;font-weight:600;">Viewer</div>
                <button id="snapshotBtn" class="small" type="button">Capture</button>
                <button id="fullscreenBtn" class="small" type="button">Fullscreen</button>
                <div style="flex:1"></div>
            </div>
            <label for="modelSelect">Model</label>
            <select id="modelSelect"></select>

            <label for="motionSelect">Motion</label>
            <select id="motionSelect"></select>

            
            <label for="expressionSelect">Face</label>
            <select id="expressionSelect"></select>
            

            <hr style="margin:10px 0;border:0;border-top:1px solid rgba(255,255,255,0.06);">

            <div style="display:flex;align-items:center;gap:8px;margin-top:8px;">
                <div style="margin-right:auto">Cheek</div>
                <div style="display:flex;gap:6px;">
                    <label><input type="radio" name="cheek" id="cheek0" value="0" checked>0</label>
                    <label><input type="radio" name="cheek" id="cheek1" value="1">1</label>
                    <label><input type="radio" name="cheek" id="cheek2" value="2">2</label>
                </div>
                <div style="margin-left:auto;display:flex;align-items:center;gap:6px;">
                    <label style="font-size:12px;">Lock</label>
                    <input id="cheekLock" type="checkbox">
                </div>
            </div>

            <div style="display:flex;align-items:center;gap:8px;margin-top:8px;">
                <label style="display:flex;align-items:center;gap:6px;"><input id="eyeClosed" type="checkbox">Eye Close</label>
                <div style="margin-left:auto;display:flex;align-items:center;gap:6px;">
                    <label style="font-size:12px;">Lock</label>
                    <input id="eyeLock" type="checkbox">
                </div>
            </div>

            <div style="display:flex;align-items:center;gap:8px;margin-top:8px;">
                <label for="mouthRange">Mouth</label>
                <input id="mouthRange" type="range" min="0" max="1" step="0.01" value="0" style="flex:1;">
                <div style="display:flex;align-items:center;gap:6px;">
                    <label style="font-size:12px;">Lock</label>
                    <input id="mouthLock" type="checkbox">
                </div>
            </div>

            <div style="display:flex;gap:8px;margin-top:6px;align-items:center;">
                <button id="micToggle" type="button">Start Mic Lipsync</button>
                <div style="display:flex;align-items:center;gap:8px;margin-left:12px;">
                    <label for="micSensitivity" style="font-size:12px;">Mic Sens</label>
                    <input id="micSensitivity" type="range" min="0.25" max="2" step="0.05" value="1" style="width:110px;">
                </div>
            </div>
        </div>
        <div id="rotateHint" aria-hidden="true">
            <div class="rotatePanel">
                <div style="font-size:16px;font-weight:600;margin-bottom:8px;">Rotate your device</div>
                <div style="max-width:300px">Please rotate your device to landscape for the best experience.</div>
            </div>
        </div>
        <div id="toast" style="position:fixed;left:50%;transform:translateX(-50%);bottom:20px;z-index:60;display:none;padding:8px 12px;background:rgba(0,0,0,0.75);color:#fff;border-radius:8px;font-size:13px;">&nbsp;</div>
    </div>

    <script src="viewer.js"></script>
    <script src="policy.js"></script>
    <script src="main.js"></script>
</body>
</html>
